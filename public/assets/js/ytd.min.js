var socket = io();

socket.on("erreur", (socket_msg) => {
  $("#errorMessage").show().html(socket_msg);
  setTimeout(() => {
    $("#errorMessage").fadeOut(200);
  }, 1000);
});

socket.on("info", (socket_msg) => {
  $("#infoMessage").show().html(socket_msg);
  setTimeout(() => {
    $("#infoMessage").fadeOut(500);
  }, 1000);
});

socket.on("gif-on", () => {
  $("#loadingImg").show().html('<img src="assets/img/loading.gif"/>');
});

socket.on("gif-off", () => {
  $("#loadingImg, #infoMessage").hide();
  setTimeout(() => {
    $("#updateMessage").fadeOut(500);
  }, 1000);
});

socket.on("dl-update", (socket_msg) => {
  $("#updateMessage").html(socket_msg);
});

$("#urlForm").submit(function (e) {
  e.preventDefault();
  if ($("#urlInput").val() != "" && $("#urlInput").val())
    socket.emit("url", $("#urlInput").val());
  $("#urlInput").val("");
});
